


<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    
    <title>Retrieving a data file &mdash; Pooch dev</title>
    


  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/style.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="_static/favicon.png"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Citing Pooch" href="citing.html" />
    <link rel="prev" title="Installing" href="install.html" />
    <!-- Google Analytics tracking code -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new
            Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-38125837-1', 'auto', {'storage': 'none'});
      ga('set', 'anonymizeIp', true);
      ga('send', 'pageview');
    </script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html">
          

          
            
            <img src="_static/pooch-logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                dev
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
    
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installing</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Retrieving a data file</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#getting-started">Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="#unknown-file-hash">Unknown file hash</a></li>
<li class="toctree-l2"><a class="reference internal" href="#customizing-the-download">Customizing the download</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="citing.html">Citing Pooch</a></li>
</ul>
<p class="caption"><span class="caption-text">Training your Pooch</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="beginner.html">Beginner tricks</a></li>
<li class="toctree-l1"><a class="reference internal" href="intermediate.html">Intermediate tricks</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced.html">Advanced tricks</a></li>
<li class="toctree-l1"><a class="reference internal" href="downloaders.html">Downloaders</a></li>
<li class="toctree-l1"><a class="reference internal" href="processors.html">Processors</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="changes.html">Changelog</a></li>
</ul>

            
          

    
        <p class="caption">
            <span class="caption-text">
            
                Getting help and contributing
            
            </span>
        </p>
        <ul>
            
                <li class="toctree-l1"><a href="https://www.fatiando.org"><i class="fa fa-external-link-square fa-fw"></i> Fatiando a Terra</a></li>
            
                <li class="toctree-l1"><a href="https://github.com/fatiando/pooch/blob/master/CONTRIBUTING.md"><i class="fa fa-users fa-fw"></i> Contributing</a></li>
            
                <li class="toctree-l1"><a href="https://github.com/fatiando/pooch/blob/master/CODE_OF_CONDUCT.md"><i class="fa fa-gavel fa-fw"></i> Code of Conduct</a></li>
            
                <li class="toctree-l1"><a href="http://contact.fatiando.org"><i class="fa fa-comment fa-fw"></i> Contact</a></li>
            
                <li class="toctree-l1"><a href="https://github.com/fatiando/pooch"><i class="fa fa-github fa-fw"></i> Source Code</a></li>
            
        </ul>
    

        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Pooch</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          
















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Retrieving a data file</li>
    
    
    <li class="source-link">
        
            
                <a href="https://github.com/fatiando/pooch/edit/master/doc/retrieve.rst"
                   class="fa fa-github"> Improve this page</a>
            
        
        
    </li>

  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="retrieving-a-data-file">
<span id="retrieve"></span><h1>Retrieving a data file<a class="headerlink" href="#retrieving-a-data-file" title="Permalink to this headline">¶</a></h1>
<p>A common task in data analysis workflows is downloading the data from a
publicly available source. This could be done manually (which can’t be easily
reproduced) or programmatically using <a class="reference external" href="https://docs.python.org/3/library/urllib.html#module-urllib" title="(in Python v3.9)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">urllib</span></code></a> or <a class="reference external" href="https://3.python-requests.org/api/#module-requests" title="(in Requests v2.21.0)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">requests</span></code></a> (which
can require a non-trivial amount of code). Ideally, we should
be checking that the downloaded file is not corrupted with a known
<a class="reference external" href="https://en.wikipedia.org/wiki/Cryptographic_hash_function">checksum</a>.</p>
<div class="section" id="getting-started">
<h2>Getting started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<p>Pooch is designed to simplify all of these tasks (and more). If you’re only
looking to download one or two data files only, Pooch offers the
<a class="reference internal" href="api/generated/pooch.retrieve.html#pooch.retrieve" title="pooch.retrieve"><code class="xref py py-func docutils literal notranslate"><span class="pre">pooch.retrieve</span></code></a> function:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pooch</span>


<span class="c1"># Download the file and save it locally.</span>
<span class="n">fname</span> <span class="o">=</span> <span class="n">pooch</span><span class="o">.</span><span class="n">retrieve</span><span class="p">(</span>
    <span class="c1"># URL to one of Pooch&#39;s test files</span>
    <span class="n">url</span><span class="o">=</span><span class="s2">&quot;https://github.com/fatiando/pooch/raw/v1.0.0/data/tiny-data.txt&quot;</span><span class="p">,</span>
    <span class="c1"># Pooch will check the MD5 checksum of the downloaded file against the</span>
    <span class="c1"># given value to make sure it haven&#39;t been corrupted. You can use other</span>
    <span class="c1"># hashes by specifying different algorithm names (sha256, sha1, etc).</span>
    <span class="n">known_hash</span><span class="o">=</span><span class="s2">&quot;md5:70e2afd3fd7e336ae478b1e740a5f08e&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The file is stored locally, by default in a folder called <code class="docutils literal notranslate"><span class="pre">pooch</span></code> in the
default cache location of your operating system (see <a class="reference internal" href="api/generated/pooch.os_cache.html#pooch.os_cache" title="pooch.os_cache"><code class="xref py py-func docutils literal notranslate"><span class="pre">pooch.os_cache</span></code></a>).
The function returns the full path to the downloaded data file, which you can
then pass to pandas, numpy, xarray, etc, to load into memory.</p>
<p>Running this code a second time will not trigger a download since the file
already exists. So you can place this function call at the start of your script
or Jupyter notebook without having to worry about repeat downloads. Anyone
getting a copy of your code should also get the correct data file the first
time they run it.</p>
<p>If the file is updated on the server and <code class="docutils literal notranslate"><span class="pre">known_hash</span></code> is set to the checksum
of the new file, Pooch will automatically detect that the file needs to be
updated and download the new version.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <a class="reference internal" href="api/generated/pooch.retrieve.html#pooch.retrieve" title="pooch.retrieve"><code class="xref py py-func docutils literal notranslate"><span class="pre">pooch.retrieve</span></code></a> function is useful when you have one or two
files to download. <strong>If you need to manage the download and caching of
several files</strong> (for example, if you’re developing a Python package or for
large data analysis projects), then you should start using the full
capabilities of the <a class="reference internal" href="api/generated/pooch.Pooch.html#pooch.Pooch" title="pooch.Pooch"><code class="xref py py-class docutils literal notranslate"><span class="pre">pooch.Pooch</span></code></a> class. It can handle sandboxing
data for different package versions, allow users to set the download
locations, and more.</p>
<p>See <a class="reference internal" href="beginner.html#beginner"><span class="std std-ref">Beginner tricks</span></a> and <a class="reference internal" href="intermediate.html#intermediate"><span class="std std-ref">Intermediate tricks</span></a> to get started.</p>
</div>
</div>
<div class="section" id="unknown-file-hash">
<h2>Unknown file hash<a class="headerlink" href="#unknown-file-hash" title="Permalink to this headline">¶</a></h2>
<p>If you don’t know the hash of the file, you can set <code class="docutils literal notranslate"><span class="pre">known_hash=None</span></code> to
bypass the check. If this is the case, <a class="reference internal" href="api/generated/pooch.retrieve.html#pooch.retrieve" title="pooch.retrieve"><code class="xref py py-func docutils literal notranslate"><span class="pre">retrieve</span></code></a> will print a log
message with the SHA256 hash of the downloaded file. <strong>It’s highly recommended
that you copy and paste this hash into your code</strong> and use it as the
<code class="docutils literal notranslate"><span class="pre">known_hash</span></code>.</p>
<p>That way, the next time your code is run (by you or someone
else) you can guarantee that the exact same file is downloaded. This is a way
to help make sure the results of your code are reproducible.</p>
</div>
<div class="section" id="customizing-the-download">
<h2>Customizing the download<a class="headerlink" href="#customizing-the-download" title="Permalink to this headline">¶</a></h2>
<p>Function <a class="reference internal" href="api/generated/pooch.retrieve.html#pooch.retrieve" title="pooch.retrieve"><code class="xref py py-func docutils literal notranslate"><span class="pre">pooch.retrieve</span></code></a> has support for all of Pooch’s
<a class="reference internal" href="downloaders.html#downloaders"><span class="std std-ref">downloaders</span></a> and <a class="reference internal" href="processors.html#processors"><span class="std std-ref">processors</span></a>. You can
use HTTP, FTP, and SFTP (with or without authentication), decompress files, unpack
archives, show progress bars, and more with a bit of configuration.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="citing.html" class="btn btn-neutral float-right" title="Citing Pooch" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="install.html" class="btn btn-neutral float-left" title="Installing" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2018-2020, The Pooch Developers.
      <span class="lastupdated">
        Last updated on Nov 27, 2020.
      </span>

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>