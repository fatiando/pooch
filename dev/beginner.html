


<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    
    <title>Beginner tricks &mdash; Pooch dev</title>
    


  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/style.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="_static/favicon.png"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Intermediate tricks" href="intermediate.html" />
    <link rel="prev" title="Citing Pooch" href="citing.html" />
    <!-- Google Analytics tracking code -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new
            Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-38125837-1', 'auto', {'storage': 'none'});
      ga('set', 'anonymizeIp', true);
      ga('send', 'pageview');
    </script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html">
          

          
            
            <img src="_static/pooch-logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                dev
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
    
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installing</a></li>
<li class="toctree-l1"><a class="reference internal" href="retrieve.html">Retrieving a data file</a></li>
<li class="toctree-l1"><a class="reference internal" href="citing.html">Citing Pooch</a></li>
</ul>
<p class="caption"><span class="caption-text">Training your Pooch</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Beginner tricks</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#the-problem">The problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="#assumptions">Assumptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#basic-setup">Basic setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="#hashes">Hashes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#versioning">Versioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="#where-to-go-from-here">Where to go from here</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="intermediate.html">Intermediate tricks</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced.html">Advanced tricks</a></li>
<li class="toctree-l1"><a class="reference internal" href="downloaders.html">Downloaders</a></li>
<li class="toctree-l1"><a class="reference internal" href="processors.html">Processors</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="changes.html">Changelog</a></li>
</ul>

            
          

    
        <p class="caption">
            <span class="caption-text">
            
                Getting help and contributing
            
            </span>
        </p>
        <ul>
            
                <li class="toctree-l1"><a href="https://www.fatiando.org"><i class="fa fa-external-link-square fa-fw"></i> Fatiando a Terra</a></li>
            
                <li class="toctree-l1"><a href="https://github.com/fatiando/pooch/blob/master/CONTRIBUTING.md"><i class="fa fa-users fa-fw"></i> Contributing</a></li>
            
                <li class="toctree-l1"><a href="https://github.com/fatiando/pooch/blob/master/CODE_OF_CONDUCT.md"><i class="fa fa-gavel fa-fw"></i> Code of Conduct</a></li>
            
                <li class="toctree-l1"><a href="http://contact.fatiando.org"><i class="fa fa-comment fa-fw"></i> Contact</a></li>
            
                <li class="toctree-l1"><a href="https://github.com/fatiando/pooch"><i class="fa fa-github fa-fw"></i> Source Code</a></li>
            
        </ul>
    

        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Pooch</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          
















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Beginner tricks</li>
    
    
    <li class="source-link">
        
            
                <a href="https://github.com/fatiando/pooch/edit/master/doc/beginner.rst"
                   class="fa fa-github"> Improve this page</a>
            
        
        
    </li>

  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="beginner-tricks">
<span id="beginner"></span><h1>Beginner tricks<a class="headerlink" href="#beginner-tricks" title="Permalink to this headline">¶</a></h1>
<p>This section covers the minimal setup required to use Pooch to manage your data
collection. We highly recommend looking at the <a class="reference internal" href="intermediate.html#intermediate"><span class="std std-ref">Intermediate tricks</span></a> tutorial as
well after you’re done with this one.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you’re only looking to download a single file, see <a class="reference internal" href="retrieve.html#retrieve"><span class="std std-ref">Retrieving a data file</span></a>
instead.</p>
</div>
<div class="section" id="the-problem">
<h2>The problem<a class="headerlink" href="#the-problem" title="Permalink to this headline">¶</a></h2>
<p>You develop a Python library called <code class="docutils literal notranslate"><span class="pre">plumbus</span></code> for analysing data emitted by
interdimensional portals. You want to distribute sample data so that your users
can easily try out the library by copying and pasting from the docs. You want
to have a <code class="docutils literal notranslate"><span class="pre">plumbus.datasets</span></code> module that defines functions like
<code class="docutils literal notranslate"><span class="pre">fetch_c137()</span></code> that will return the data loaded as a
<a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v1.1.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code></a> for convenient access.</p>
</div>
<div class="section" id="assumptions">
<h2>Assumptions<a class="headerlink" href="#assumptions" title="Permalink to this headline">¶</a></h2>
<p>We’ll set up Pooch to solve your data distribution needs.
In this example, we’ll work with the follow assumptions:</p>
<ol class="arabic simple">
<li><p>Your sample data are in a folder of your GitHub repository.</p></li>
<li><p>You use git tags to mark releases of your project in the history.</p></li>
<li><p>Your project has a variable that defines the version string.</p></li>
<li><p>The version string contains an indicator that the current commit is not a
release (like <code class="docutils literal notranslate"><span class="pre">'v1.2.3+12.d908jdl'</span></code> or <code class="docutils literal notranslate"><span class="pre">'v0.1+dev'</span></code>).</p></li>
</ol>
<p>Other use cases can also be handled (see <a class="reference internal" href="intermediate.html#intermediate"><span class="std std-ref">Intermediate tricks</span></a>).
For now, let’s say that this is the layout of your repository on GitHub:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>doc/
    ...
data/
    README.md
    c137.csv
    cronen.csv
plumbus/
    __init__.py
    ...
    datasets.py
setup.py
...
</pre></div>
</div>
<p>The sample data are stored in the <code class="docutils literal notranslate"><span class="pre">data</span></code> folder of your repository.</p>
</div>
<div class="section" id="basic-setup">
<h2>Basic setup<a class="headerlink" href="#basic-setup" title="Permalink to this headline">¶</a></h2>
<p>Pooch can download and cache your data files to the users’ computer
automatically. This is what the <code class="docutils literal notranslate"><span class="pre">plumbus/datasets.py</span></code> file would look like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Load sample data.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">pandas</span>
<span class="kn">import</span> <span class="nn">pooch</span>

<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">version</span>  <span class="c1"># The version string of your project</span>


<span class="n">POOCH</span> <span class="o">=</span> <span class="n">pooch</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
    <span class="c1"># Use the default cache folder for the OS</span>
    <span class="n">path</span><span class="o">=</span><span class="n">pooch</span><span class="o">.</span><span class="n">os_cache</span><span class="p">(</span><span class="s2">&quot;plumbus&quot;</span><span class="p">),</span>
    <span class="c1"># The remote data is on Github</span>
    <span class="n">base_url</span><span class="o">=</span><span class="s2">&quot;https://github.com/rick/plumbus/raw/</span><span class="si">{version}</span><span class="s2">/data/&quot;</span><span class="p">,</span>
    <span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">,</span>
    <span class="c1"># If this is a development version, get the data from the master branch</span>
    <span class="n">version_dev</span><span class="o">=</span><span class="s2">&quot;master&quot;</span><span class="p">,</span>
    <span class="c1"># The registry specifies the files that can be fetched</span>
    <span class="n">registry</span><span class="o">=</span><span class="p">{</span>
        <span class="c1"># The registry is a dict with file names and their SHA256 hashes</span>
        <span class="s2">&quot;c137.csv&quot;</span><span class="p">:</span> <span class="s2">&quot;19uheidhlkjdwhoiwuhc0uhcwljchw9ochwochw89dcgw9dcgwc&quot;</span><span class="p">,</span>
        <span class="s2">&quot;cronen.csv&quot;</span><span class="p">:</span> <span class="s2">&quot;1upodh2ioduhw9celdjhlfvhksgdwikdgcowjhcwoduchowjg8w&quot;</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">)</span>


<span class="k">def</span> <span class="nf">fetch_c137</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Load the C-137 sample data as a pandas.DataFrame.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># The file will be downloaded automatically the first time this is run</span>
    <span class="c1"># returns the file path to the downloaded file. Afterwards, Pooch finds</span>
    <span class="c1"># it in the local cache and doesn&#39;t repeat the download.</span>
    <span class="n">fname</span> <span class="o">=</span> <span class="n">POOCH</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="s2">&quot;c137.csv&quot;</span><span class="p">)</span>
    <span class="c1"># The &quot;fetch&quot; method returns the full path to the downloaded data file.</span>
    <span class="c1"># All we need to do now is load it with our standard Python tools.</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">data</span>


<span class="k">def</span> <span class="nf">fetch_cronen</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Load the Cronenberg sample data as a pandas.DataFrame.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">fname</span> <span class="o">=</span> <span class="n">POOCH</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="s2">&quot;cronen.csv&quot;</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">POOCH</span></code> returned by <a class="reference internal" href="api/generated/pooch.create.html#pooch.create" title="pooch.create"><code class="xref py py-func docutils literal notranslate"><span class="pre">pooch.create</span></code></a> is an instance of the
<a class="reference internal" href="api/generated/pooch.Pooch.html#pooch.Pooch" title="pooch.Pooch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pooch</span></code></a> class. The class contains the data registry (files, URLs,
hashes, etc) and handles downloading files from the registry using the
<a class="reference internal" href="api/generated/pooch.Pooch.html#pooch.Pooch.fetch" title="pooch.Pooch.fetch"><code class="xref py py-meth docutils literal notranslate"><span class="pre">fetch</span></code></a> method.</p>
<p>When the user calls <code class="docutils literal notranslate"><span class="pre">plumbus.datasets.fetch_c137()</span></code> for the first time, the
data file will be downloaded and stored in the local storage. In this case,
we’re using <a class="reference internal" href="api/generated/pooch.os_cache.html#pooch.os_cache" title="pooch.os_cache"><code class="xref py py-func docutils literal notranslate"><span class="pre">pooch.os_cache</span></code></a> to set the local folder to the default cache
location for your OS. You could also provide any other path if you prefer. The
download is only performed once and after that Pooch knows to only return the
path to the already downloaded file.</p>
<p>The setup shown here is the minimum required to use Pooch if your package
follows the assumptions laid out above. Pooch also supports downloading files
from multiple sources (including FTP), and more. See the <a class="reference internal" href="intermediate.html#intermediate"><span class="std std-ref">Intermediate tricks</span></a>
tutorial and the documentation for <a class="reference internal" href="api/generated/pooch.create.html#pooch.create" title="pooch.create"><code class="xref py py-func docutils literal notranslate"><span class="pre">pooch.create</span></code></a> and <a class="reference internal" href="api/generated/pooch.Pooch.html#pooch.Pooch" title="pooch.Pooch"><code class="xref py py-func docutils literal notranslate"><span class="pre">pooch.Pooch</span></code></a>
for more options.</p>
</div>
<div class="section" id="hashes">
<h2>Hashes<a class="headerlink" href="#hashes" title="Permalink to this headline">¶</a></h2>
<p>Pooch uses <a class="reference external" href="https://en.wikipedia.org/wiki/SHA-2">SHA256</a> hashes by default
to check if files are up-to-date or possibly corrupted:</p>
<ul class="simple">
<li><p>If a file exists in the local folder, Pooch will check that its hash matches
the one in the registry. If it doesn’t, we’ll assume that it needs to be
updated.</p></li>
<li><p>If a file needs to be updated or doesn’t exist, Pooch will download it from
the remote source and check the hash. If the hash doesn’t match, an exception
is raised to warn of possible file corruption.</p></li>
</ul>
<p>You can generate hashes for your data files using <code class="docutils literal notranslate"><span class="pre">openssl</span></code> in the terminal:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ openssl sha256 data/c137.csv
SHA256<span class="o">(</span>data/c137.csv<span class="o">)=</span> baee0894dba14b12085eacb204284b97e362f4f3e5a5807693cc90ef415c1b2d
</pre></div>
</div>
<p>Or using the <a class="reference internal" href="api/generated/pooch.file_hash.html#pooch.file_hash" title="pooch.file_hash"><code class="xref py py-func docutils literal notranslate"><span class="pre">pooch.file_hash</span></code></a> function (which is a convenient way of
calling Python’s <a class="reference external" href="https://docs.python.org/3/library/hashlib.html#module-hashlib" title="(in Python v3.9)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">hashlib</span></code></a>):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pooch</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pooch</span><span class="o">.</span><span class="n">file_hash</span><span class="p">(</span><span class="s2">&quot;data/c137.csv&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>Alternative hashing algorithms supported by <a class="reference external" href="https://docs.python.org/3/library/hashlib.html#module-hashlib" title="(in Python v3.9)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">hashlib</span></code></a> can be used as well:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pooch</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pooch</span><span class="o">.</span><span class="n">file_hash</span><span class="p">(</span><span class="s2">&quot;data/c137.csv&quot;</span><span class="p">,</span> <span class="n">alg</span><span class="o">=</span><span class="s2">&quot;sha512&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>In this case, you can specify the hash algorithm in the registry by prepending
it to the hash, for example <code class="docutils literal notranslate"><span class="pre">&quot;md5:0hljc7298ndo2&quot;</span></code> or
<code class="docutils literal notranslate"><span class="pre">&quot;sha512:803o3uh2pecb2p3829d1bwouh9d&quot;</span></code>. Pooch will understand this and use
the appropriate method.</p>
</div>
<div class="section" id="versioning">
<h2>Versioning<a class="headerlink" href="#versioning" title="Permalink to this headline">¶</a></h2>
<p>The files from different version of your project will be kept in separate
folders to make sure they don’t conflict with each other. This way, you can
safely update data files while maintaining backward compatibility. For example,
if <code class="docutils literal notranslate"><span class="pre">path=&quot;.plumbus&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">version=&quot;v0.1&quot;</span></code>, the data folder will be
<code class="docutils literal notranslate"><span class="pre">.plumbus/v0.1</span></code>.</p>
<p>When your project updates, Pooch will automatically setup a separate folder for
the new data files based on the given version string. The remote URL will also
be updated. Notice that there is a format specifier <code class="docutils literal notranslate"><span class="pre">{version}</span></code> in the URL
that Pooch substitutes for you.</p>
<p>Versioning is optional and can be ignored by omitting the <code class="docutils literal notranslate"><span class="pre">version</span></code> and
<code class="docutils literal notranslate"><span class="pre">version_dev</span></code> arguments or setting them to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</div>
<div class="section" id="where-to-go-from-here">
<h2>Where to go from here<a class="headerlink" href="#where-to-go-from-here" title="Permalink to this headline">¶</a></h2>
<p>Pooch has more features for handling different download protocols, handling
large registries, downloading from multiple sources, and more. Check out the
<a class="reference internal" href="intermediate.html#intermediate"><span class="std std-ref">Intermediate tricks</span></a> and <a class="reference internal" href="advanced.html#advanced"><span class="std std-ref">Advanced tricks</span></a> for more information.</p>
<p>You can also customize the download itself (adding authentication, progress
bars, etc) and apply post-download steps (unzipping an archive, decompressing a
file, etc) through its <a class="reference internal" href="downloaders.html#downloaders"><span class="std std-ref">Downloaders</span></a> and <a class="reference internal" href="processors.html#processors"><span class="std std-ref">Processors</span></a>.</p>
<p>If you any questions, please feel free to ask on our
<a class="reference external" href="http://contact.fatiando.org/">Slack chatroom</a> or by opening an
<a class="reference external" href="https://github.com/fatiando/pooch/issues">issue on GitHub</a>.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="intermediate.html" class="btn btn-neutral float-right" title="Intermediate tricks" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="citing.html" class="btn btn-neutral float-left" title="Citing Pooch" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2018-2020, The Pooch Developers.
      <span class="lastupdated">
        Last updated on Nov 27, 2020.
      </span>

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>